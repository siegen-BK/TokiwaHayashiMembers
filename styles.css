:root {
  /* ===== 黒/白のみ ===== */
  --ink: #000;
  --grid: #000;
  --bg: #fff;

  /* ===== 列幅 ===== */
  --col-section: 1.6fr;
  --col-part: 0.92fr;
  --col-notes: 1.4fr;

  /* ===== 行高 ===== */
  --h-unit: 36px;
  --header-h: 18px; /* 実効値36pxの半分として定義 */

  /* ===== 固定（fixed）連動用変数 ===== */
  --app-header-h: 80px;         /* アプリヘッダーの実高 */
  --toolbar-h: 44px;            /* ツールバーの実高 */
  --sticky-top-toolbar: 80px;   /* ツールバーの固定位置(top) */
  --sticky-top-tablehead: 124px; /* 見出し行の固定位置(top) */
}

* { box-sizing: border-box; }

body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
  margin: 0;
  color: var(--ink);
  background: var(--bg);
}

/* =========================================================
   固定帯 1: アプリヘッダー（最上段固定）
   ========================================================= */
.app-header {
  position: fixed; /* 最初から固定 */
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  background: #fff;
  border-bottom: 1px solid #000;
  padding: 12px 16px;
}

/* =========================================================
   本文コンテナ（固定要素の裏に隠れないよう余白を確保）
   ========================================================= */
main {
  /* 余白 ＝ アプリヘッダ ＋ ツールバー ＋ 見出し行(H*2+2px) */
  padding-top: calc(var(--app-header-h) + var(--toolbar-h) + (var(--header-h) * 2) + 2px);
  padding-left: 16px;
  padding-right: 16px;
  max-width: 960px;
  margin: 0 auto;
}

/* =========================================================
   固定帯 2: セクションツールバー（アプリヘッダー直下固定）
   ========================================================= */
.section-toolbar {
  position: fixed; /* 最初から固定 */
  top: var(--sticky-top-toolbar);
  left: 0;
  right: 0;
  z-index: 90;
  background: #fff;
  width: 100%;
  max-width: 960px; /* mainと合わせる */
  margin: 0 auto;
  min-height: 44px;
}

/* =========================================================
   固定帯 3: 先頭行（見出し行）（ツールバー直下固定）
   ========================================================= */
.first-row-table {
  position: fixed; /* 最初から固定 */
  top: var(--sticky-top-tablehead);
  left: 50%;
  transform: translateX(-50%);
  width: calc(100% - 32px); /* mainのpadding 16px*2 を考慮 */
  max-width: 928px;
  z-index: 80;
  background: #fff;

  border-top: 1px solid #000;
  border-left: 1px solid #000;
  border-right: 1px solid #000;
  border-bottom: none;
}

/* --- セル等の定義は変更なしのため省略 --- */

/* =========================================================
   白マスク（ボタン隠し用）：H + 2px で正確に追従
   ========================================================= */

/* ツールバー部分のマスク */
body::before {
  content: '';
  position: fixed;
  top: var(--sticky-top-toolbar);
  left: 0;
  right: 0;
  height: var(--toolbar-h);
  background: #fff;
  z-index: 89;
  pointer-events: none;
}

/* 先頭行部分のマスク（H*2 + 2px で上下枠線までカバー） */
body::after {
  content: '';
  position: fixed;
  top: var(--sticky-top-tablehead);
  left: 0;
  right: 0;
  /* ズームしても枠線1px*2が変わらないことを利用した計算 */
  height: calc((var(--header-h) * 2) + 2px); 
  background: #fff;
  z-index: 79;
  pointer-events: none;
}
